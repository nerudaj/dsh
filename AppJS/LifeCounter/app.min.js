"use strict";"static";var va=1;function fa(t){return document.getElementById(t)}function fb(t){return document.getElementsByName(t)}function fc(t,n,e){var o="ERROR: "+t+"::"+n+": "+e;console.error(o),0<va&&alert(o)}function fd(t,n){return Math.floor(Math.random()*n+t)}function fe(t,n){return void 0!==t?t:n}function ff(t,n,e,o){var i=fe(o,100),a=fa("HiddenResizer");a.style.fontSize=i+"px",a.innerHTML=t;for(var f=a.offsetWidth,r=a.offsetHeight;.8*n<f||.8*e<r;)i-=1,a.style.fontSize=i+"px",f=a.offsetWidth,r=a.offsetHeight;return i}function aElement(){this.dom=null,this.width=0,this.height=0}function View(){this.app=null}function App(){this.context={},this.canvas=new aElement,this.views={},this.currentView=""}function fg(){var t=this.app.canvas;fE(t,vo.whoStarts),fh(fF(t)),fD(t,[new fB(vo.throwDice,function(){fi()}),new fB(vo.tossCoin,function(){fj()}),new fB(vo.back,function(){app.toggleView("score")})],"b")}function fh(t){var n=t.add(0,0,1,1,"div","c"),e=fp(n,1,1,"#######","d",1e3);n.pc("??",!1,e)}function fi(){var t=["⚀","⚁","⚂","⚃","⚄","⚅"],n=fa("c");n.innerHTML="";for(var e=0;e<3;e++)n.innerHTML+=t[fd(1,6)-1]+" "}function fj(){var t=[vo.coin1,vo.coin2];fa("c").innerHTML=t[fd(1,2)-1]}function fk(){this.score=0,this.subscore=0,this.color="red"}function fl(t){var n="0"+String(t%60);return("0"+String(Math.floor(t/60))).slice(-2)+":"+n.slice(-2)}function fm(t,n){return t.length>n.length?t:n}function fn(t){return clearInterval(t),null}Element.prototype.pa=function(t,n){this.addEventListener(t,n)},aElement.prototype.add=function(t,n,e,o,i,a){i=fe(i,"div"),a=fe(a,null);var f=new aElement,r=document.createElement(i);return null!=a&&r.setAttribute("id",a),this.dom.appendChild(r),f.dom=r,f.width=this.width*e,f.height=this.height*o,f.dom.style.position="absolute",f.dom.style.left=this.width*t+"px",f.dom.style.top=this.height*n+"px",f.dom.style.width=f.width+"px",f.dom.style.height=f.height+"px",f},aElement.prototype.pb=function(t){this.dom.style.background=t},aElement.prototype.pc=function(t,n,e){var o=null;(n=fe(n,!1))?(e=fe(e,100),o=ff(t,this.width,this.height,e)):"undefined"!==e&&(o=e);var i=document.createTextNode(t);null!=o&&(this.dom.style.fontSize=o+"px"),this.dom.appendChild(i)},View.prototype.render=function(){fc("View","render","This method is not implemented!")},View.prototype.bootstrap=function(t){this.app=t},App.prototype.addView=function(t,n){var e=this.views;return e.hasOwnProperty(n)?(fc("App","addView","View with name "+n+" already exists!"),!1):(e[n]=t,e[n].bootstrap(this),!0)},App.prototype.toggleView=function(t){this.views.hasOwnProperty(t)?(this.currentView=t,this.render()):fc("App","toggleView","View called "+t+" does not exist!")},App.prototype.render=function(){var t=this.canvas;t.dom.innerHTML="",t.width=window.innerWidth,t.height=window.innerHeight,t.dom.style.position="absolute",t.dom.style.width=t.width+"px",t.dom.style.height=t.height+"px",this.views[this.currentView].render()},App.prototype.bootstrap=function(t){this.canvas.dom=fa(t);var n=this;window.addEventListener("resize",function(){fa("a")!=document.activeElement&&(fo(),n.render())})};var vb={};function fo(){vb={}}function fp(t,n,e,o,i,a){var f=fe(a,100);return null==vb[i]&&(vb[i]=ff(o,t.width*n,t.height*e,f)),vb[i]}var app=new App;function Main(){app.bootstrap("Canvas"),app.context.players=[],app.context.initScore=0,app.context.numOfPlayers=4,app.context.colorSetup=[0,1,2,3,4,5],app.context.initCountdown=30,app.context.countdown=0,app.context.cntIntHndl=null;for(var t=0;t<app.context.numOfPlayers;t++)app.context.players.push(new fk),app.context.players[t].score=app.context.initScore,app.context.players[t].color=Colors[app.context.colorSetup[t]];var n=[{callback:fq,name:"score"},{callback:fu,name:"settings"},{callback:fG,name:"timer"},{callback:fJ,name:"timer_settings"},{callback:fg,name:"dice"}];for(t=0;t<n.length;t++){var e=new View;e.render=n[t].callback,app.addView(e,n[t].name)}app.toggleView("score")}function fq(){var t=this.app.canvas;fr(fF(t,!1),this.app),fD(t,[new fB(vo.whoStarts,function(){app.toggleView("dice")}),new fB(vo.timer,function(){app.toggleView("timer")}),new fB(vo.settings,function(){app.toggleView("settings")})],"e")}function fr(t,n){for(var e=n.context.players.length,o=2==e?1:2,i=Math.ceil(e/o),a=1/o,f=1/i,r=0,c=0;c<i;c++)for(var p=0;p<o;p++){e%2==1&&r+1==e&&(a=1);var s=t.add(p*a,c*f,a,f);if(s.pb(n.context.players[r].color),fs(r,s,n),e==++r)return}}function fs(t,n,e){var o=fp(n,.25,1,"XX","f",250);n.add(.25,0,.5,1,"div","g"+t).dom.style.fontSize=o+"px";var i=n.add(0,0,.25,1,"button");i.pc("−",!1,o),i.dom.pa("click",function(){ft(e.context.players,t,-1)}),i.dom.className="score_btn";var a=n.add(.75,0,.25,1,"button");a.pc("+",!1,o),a.dom.pa("click",function(){ft(e.context.players,t,1)}),a.dom.className="score_btn",ft(e.context.players,t,e.context.players[t].score,!0)}function ft(t,n,e,o){o=fe(o,!1);t[n].score=(o?0:parseInt(t[n].score))+e,fa("g"+n).innerHTML=t[n].score}var vc=2,vd=6,Colors=["red","lightgreen","lightblue","yellow","pink","orange","grey","white"],ve="init_score_btn init_score_btn_left",vf="init_score_btn init_score_btn_right",vg=4,vh=[0,1,2,3,4,5],vi=0;function fu(){var t=this.app.canvas;fE(t,vo.settings),fv(fF(t),app),fD(t,[new fB(vo.apply,function(){fw(app),app.toggleView("score")}),new fB(vo.back,function(){fx(app),app.toggleView("score")})],"h")}function fv(t,n){for(var e=[vo.plCount,vo.initScore],o=fp(t,.6,.1,fm(e[0],e[1]),"i"),i=0;i<e.length;i++){var a=t.add(0,.1*i,.6,.1);a.dom.className="align_left",a.pc(e[i],!1,o)}var f=t.add(0,1/9*2,1,1/9);f.dom.style.fontWeight="bold",f.pc(vo.plColors,!1,o),fy(t.add(.6,0,.4,.1,"select"),n),fz(t.add(.6,.1,.4,.1,"input","a"),n),fA(t.add(0,1/9*3,1,1/9*6),n)}function fw(t){var n=t.context,e=n.players;for(n.numOfPlayers=vg;n.numOfPlayers<e.length;)e.pop();for(;n.numOfPlayers>e.length;)e.push(new fk);for(var o=0;o<e.length;o++)n.colorSetup[o]=vh[o],e[o].color=Colors[vh[o]],e[o].score=parseInt(vi);n.initScore=parseInt(vi)}function fx(t){var n=t.context;vg=n.numOfPlayers;for(var e=0;e<vd;e++)vh[e]=n.colorSetup[e];vi=n.initScore}function fy(e,o){for(var i=vc;i<=vd;i++)!function(t){var n=e.add(0,0,1,1,"option");n.value=i,n.pc(i),n.dom.pa("click",function(){vg=t,o.toggleView("settings")}),t==vg&&(n.dom.selected="selected")}(i)}function fz(t,n){t.dom.type="number",t.dom.value=vi,t.dom.pa("input",function(){t.dom.validity.valid&&(vi=t.dom.value)}),t.dom.autocomplete="off"}function fA(i,t){for(var a=1/Colors.length,f=1/vd,n=0;n<vg;n++)for(var e=0;e<Colors.length;e++)!function(t,n){var e=i.add(n*a,t*f,a,f);e.pb(Colors[n]);var o="";vh[t]==n&&(o="checked"),e.dom.innerHTML='<input type="radio" name="j'+t+'" value="'+n+'" '+o+">",e.dom.pa("click",function(){vh[t]=n})}(n,e)}var vj=.1,vk=.1,vl="#AAAAAA",vm="lightgrey",vn="grey";function fB(t,n){this.label=t,this.action=n}function fC(t,n,e,o,i,a,f){var r,c,p=i/n.length;if(null==vb[f]){for(var s="",l=0;l<n.length;l++)s=fm(s,n[l].label);vb[f]=ff(s,t.width*p,t.height*a)}for(l=0;l<n.length;l++)null!=n[l]&&(r=l,c=void 0,(c=t.add(e+l*p,o,p,a,"button")).dom.pa("click",n[r].action),c.pc(n[r].label,!1,vb[f]))}function fD(t,n,e){var o=t.add(0,1-vk,1,vk);o.pb(vn),fC(o,n,0,0,1,1,e)}function fE(t,n){var e=t.add(0,0,1,vj);null==vb.k&&(vb.k=ff(n,e.width,e.height)),e.pc(n,!1,vb.k),e.pb(vl)}function fF(t,n){var e=fe(n,!0)?vj:0,o=t.add(0,e,1,1-e-vk);return o.pb(vm),o}var vo={whoStarts:"Kdo začne?",throwDice:"Hoď kostkami",tossCoin:"Hoď mincí",apply:"Použít",back:"Zpět",coin1:"Hlava",coin2:"Orel",settings:"Nastavení",timer:"Nezdržuj",initScore:"Počáteční skóre",plCount:"Počet hráčů",plColors:"Barvy hráčů",countdown:"Odpočet",set:"Nastav",play:"▷",pause:"❘ ❘",stop:"◻",restart:"⟲",end:"KONEC!!"};function fG(){var t=this.app.canvas;fE(t,vo.countdown),fH(fF(t),this.app),fD(t,[new fB(vo.settings,function(){fI(app,"stop"),app.toggleView("timer_settings")}),new fB(vo.back,function(){fI(app,"stop"),app.toggleView("score")})],"l")}function fH(t,n){var e=n.context;e.countdown=e.initCountdown;var o=fp(t,1,.4,"XX:XX","m",250),i=t.add(0,0,1,.4,"div","n");i.dom.style.fontSize=o+"px",i.pc(fl(e.initCountdown)),fC(t,[new fB(vo.play,function(){fI(n,"play")}),new fB(vo.pause,function(){fI(n,"pause")}),new fB(vo.stop,function(){fI(n,"stop")}),new fB(vo.restart,function(){fI(n,"restart")})],0,.4,1,.1,"o")}function fI(t,n){var e=t.context;if("play"==n){if(null!=e.cntIntHndl)return;e.cntIntHndl=setInterval(function(){var t=fa("n");e.countdown--,t.innerHTML=fl(e.countdown),0==e.countdown&&(e.cntIntHndl=fn(e.cntIntHndl),t.innerHTML=vo.end)},1e3)}else"pause"==n?e.cntIntHndl=fn(e.cntIntHndl):"stop"==n?(e.cntIntHndl=fn(e.cntIntHndl),e.countdown=e.initCountdown,fa("n").innerHTML=fl(e.countdown)):"restart"==n?(fI(t,"stop"),fI(t,"play")):fc("Timer","CountdownControl","Invalid action name: "+n)}var vp=null;function fJ(){var t=this.app.canvas;vp=this.app.context.initCountdown,fE(t,vo.settings),fK(fF(t),this.app),fD(t,[new fB(vo.apply,function(){app.context.initCountdown=vp,app.toggleView("timer")}),new fB(vo.back,function(){app.toggleView("timer")})],"p")}function fK(t,n){var e=fp(t,1,.4,"XX:XX","q",250),o=t.add(0,0,1,.4,"div","r");o.dom.style.fontSize=e+"px",o.pc("00:00"),fC(t,[new fB("-10",function(){fL(n,-10)}),new fB("-5",function(){fL(n,-5)}),new fB("-1",function(){fL(n,-1)}),new fB("+1",function(){fL(n,1)}),new fB("+5",function(){fL(n,5)}),new fB("+10",function(){fL(n,10)})],0,.4,1,.1,"s"),fL(n,0)}function fL(t,n){vp+=n,fa("r").innerHTML=fl(vp)}
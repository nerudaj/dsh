"use strict";var version="2.0.0",va=1,vb=!1,vc={};function fa(){vc={}}function fb(t){return document.getElementById(t)}function fc(t){return document.getElementsByName(t)}function fd(t,n,i){var e="ERROR: "+t+"::"+n+": "+i;console.error(e),0<va&&alert(e)}function fe(t,n){return Math.floor(Math.random()*n+t)}function ff(t,n){return void 0!==t?t:n}function fg(t,n,i,e){var o=ff(e,100),a=fb("HiddenResizer");a.style.fontSize=o+"px",a.innerHTML=t;for(var f=a.offsetWidth,h=a.offsetHeight;.8*n<f||.8*i<h;)o-=1,a.style.fontSize=o+"px",f=a.offsetWidth,h=a.offsetHeight;return o}function fh(){this.dom=null,this.width=0,this.height=0}function fi(){this.app=null}function fj(){this.context={},this.canvas=new fh,this.views={},this.currentView=""}function fk(){var t=this.app.canvas;fA(t,"Hints"),fB(t).dom.innerHTML="<ul><li>Math.PI(x)</li><li>Math.sqrt(x)</li><li>Math.sin(x)</li><li>Math.cos(x)</li><li>Math.abs(x)</li><li>SmoothStart(x, level)</li><li>SmoothStop(x, level)</li><li>Flip(x)</li><li>Crossfade(a, b, x)</li></ul>",fz(t,[new fx("Back",function(){app.ph(0)})],"a")}fh.prototype.add=function(t,n,i,e,o,a){o=ff(o,"div"),a=ff(a,null);var f=new fh,h=document.createElement(o);return null!=a&&h.setAttribute("id",a),this.dom.appendChild(h),f.dom=h,f.width=this.width*i,f.height=this.height*e,f.dom.style.position="absolute",f.dom.style.left=this.width*t+"px",f.dom.style.top=this.height*n+"px",f.dom.style.width=f.width+"px",f.dom.style.height=f.height+"px","input"==o&&(f.pd("focus",function(){vb=!0}),f.pd("blur",function(){setTimeout(function(){vb=!1},500)})),f},fh.prototype.pa=function(t){this.dom.style.background=t},fh.prototype.pb=function(t,n,i){var e=null;(n=ff(n,!1))?(i=ff(i,100),e=fg(t,this.width,this.height,i)):"undefined"!==i&&(e=i);var o=document.createTextNode(t);null!=e&&(this.dom.style.fontSize=e+"px"),this.dom.appendChild(o)},fh.prototype.pc=function(t){this.dom.className+=" "+t},fh.prototype.pd=function(t,n){this.dom.addEventListener(t,n)},fi.prototype.pe=function(){fd("ClassView","render","This method is not implemented!")},fi.prototype.pf=function(t){this.app=t},fj.prototype.pg=function(t,n){var i=this.views;return i.hasOwnProperty(n)?(fd("ClassApp","addView","View with name "+n+" already exists!"),!1):(i[n]=t,i[n].pf(this),!0)},fj.prototype.ph=function(t){this.views.hasOwnProperty(t)?(this.currentView=t,this.pe()):fd("ClassApp","toggleView","View called "+t+" does not exist!")},fj.prototype.pe=function(){var t=this.canvas;t.dom.innerHTML="",t.width=window.innerWidth,t.height=window.innerHeight,t.dom.style.position="absolute",t.dom.style.width=t.width+"px",t.dom.style.height=t.height+"px",this.views[this.currentView].pe()},fj.prototype.pf=function(t){this.canvas.dom=fb(t);var n=this;window.addEventListener("resize",function(){vb||(fa(),n.pe())})};var app=new fj;function Main(){app.pf("Canvas");for(var t=[{callback:fl,name:0},{callback:fk,name:1}],n=0;n<t.length;n++){var i=new fi;i.pe=t[n].callback,app.pg(i,t[n].name)}app.ph(0)}var vd=100,ve=25,vf=1,vg="Input function:",vh="Function visualisation:",vi="Animation visualisation:";function Power(t,n){for(var i=1,e=0;e<n;e++)i*=t;return i}function Flip(t){return 1-t}function SmoothStart(t,n){return Math.pow(t,n)}function SmoothStop(t,n){return Flip(SmoothStart(Flip(t),n))}function Crossfade(t,n,i){return t+(n-t)*i}function fl(){var t=this.app.canvas,n=fB(t,!1);fn(n)?fo(this.app,n):fp(this.app,n),fz(t,[new fx("Apply",function(){fu(app)}),new fx("Hints",function(){clearInterval(app.context.handle),app.ph(1)})],"a"),fm(this.app)}function fm(t){var n=t.context;null!=n.handle&&(clearInterval(n.handle),n.handle=null)}function fn(t){return t.width>t.height}function fo(t,n){null==vc.b&&(vc.b=fg(vh,.5*n.width,.5*n.height*.25,1e3)),fr(t,n.add(0,0,.5,.5),.25),fs(t,n.add(.5,0,.5,.5)),ft(t,n.add(0,.5,1,.5))}function fp(t,n){null==vc.b&&(vc.b=fg(vh,.5*n.width,.1*n.height,1e3)),fr(t,n.add(0,0,1,.2),.5),fs(t,n.add(0,.2,1,.4)),ft(t,n.add(0,.6,1,.4))}function fq(t,n){t.pb(n,!1,vc.b)}function fr(t,n,i){fq(n.add(0,0,1,i),vg);var e=n.add(0,i,1,1-i),o=20/e.width,a=20/e.height,f=e.add(o,a,1-2*o,1-2*a,"input","c");f.dom.type="text",f.dom.value="SmoothStop(x, 2)"}function fs(t,n){fq(n.add(0,0,1,.25),vh);var i=n.add(0,.25,1,.75),e=20/i.width,o=20/i.height;i.add(e,o,1-2*e,1-2*o,"canvas","d")}function ft(t,n){fq(n.add(0,0,1,.25),vi);var i=n.add(0,.25,1,.75),e=20/i.width,o=20/i.height;i.add(e,o,1-2*e,1-2*o,"canvas","e")}function fu(app){var context=app.context;fm(app),context.foo=fb("c").value;for(var points=new Array(vd),x,i=0;i<vd;i++)x=i/vd,points[i]=eval(context.foo);var canvas=fb("d"),ctx=canvas.getContext("2d");ctx.strokeStyle="#FFFFFF",ctx.clearRect(0,0,canvas.width,canvas.height),ctx.beginPath();for(var i=0;i<points.length-1;i++)ctx.moveTo(i*canvas.width/points.length,canvas.height-points[i]*canvas.height),ctx.lineTo((i+1)*canvas.width/points.length,canvas.height-points[i+1]*canvas.height),ctx.stroke();ctx.closePath(),context.time=0,context.handle=setInterval(function(){fv(app)},ve)}function fv(app){var context=app.context,canvas=fb("e"),ctx=canvas.getContext("2d");ctx.strokeStyle="#FFFFFF";var x=context.time/(1e3/ve*vf),position=eval(context.foo)*canvas.width;ctx.clearRect(0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.arc(position,canvas.height/2,canvas.height/4,0,2*Math.PI),ctx.stroke(),ctx.closePath(),context.time++,context.time==1e3/ve*vf&&(context.time=0)}var vj=.0807,vk=vj;function fw(t,n){return t.length>n.length?t:n}function fx(t,n,i){this.label=t,this.action=n,this.id=ff(i,null)}function fy(t,n,i,e,o,a,f){var h,c,s=o/n.length;if(null==vc[f]){for(var d="",p=0;p<n.length;p++)d=fw(d,n[p].label);vc[f]=fg(d,t.width*s,t.height*a)}for(p=0;p<n.length;p++)null!=n[p]&&(h=p,c=void 0,(c=t.add(i+p*s,e,s,a,"button",n[h].id)).pd("click",n[h].action),c.pb(n[h].label,!1,vc[f]),0<p&&c.pc("button_separator"))}function fz(t,n,i){var e=t.add(0,1-vk,1,vk);e.pc("toolbar"),fy(e,n,0,0,1,1,i)}function fA(t,n){var i=t.add(0,0,1,vj);null==vc.f&&(vc.f=fg(n,i.width,i.height)),i.pb(n,!1,vc.f),i.pc("header")}function fB(t,n){var i=ff(n,!0)?vj:0,e=t.add(0,i,1,1-i-vk);return e.pc("content"),e}
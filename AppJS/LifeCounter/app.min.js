"use strict";var version="2.0.0",va=1,vb=!1;function fa(n){return document.getElementById(n)}function fb(n){return document.getElementsByName(n)}function fc(n,t,e){var o="ERROR: "+n+"::"+t+": "+e;console.error(o),0<va&&alert(o)}function fd(n,t){return Math.floor(Math.random()*t+n)}function fe(n,t){return void 0!==n?n:t}function ff(n,t,e,o){var f=fe(o,100),i=fa("HiddenResizer");i.style.fontSize=f+"px",i.innerHTML=n;for(var a=i.offsetWidth,c=i.offsetHeight;.8*t<a||.8*e<c;)f-=1,i.style.fontSize=f+"px",a=i.offsetWidth,c=i.offsetHeight;return f}function fg(){this.dom=null,this.width=0,this.height=0}function fh(){this.app=null}function fi(){this.context={},this.canvas=new fg,this.views={},this.currentView=""}function fj(){var n=this.app.canvas;fH(n,vk.whoStarts),fk(fI(n)),fG(n,[new fE(vk.throwDice,function(){fl()}),new fE(vk.tossCoin,function(){fm()}),new fE(vk.back,function(){app.ph(0)})],"a")}function fk(n){var t=n.add(0,0,1,1,"div","b"),e=fs(t,1,1,"#######","c",1e3);t.pb("??",!1,e)}function fl(){var n=["⚀","⚁","⚂","⚃","⚄","⚅"],t=fa("b");t.innerHTML="";for(var e=0;e<3;e++)t.innerHTML+=n[fd(1,6)-1]+" "}function fm(){var n=[vk.coin1,vk.coin2];fa("b").innerHTML=n[fd(1,2)-1]}function fn(){this.score=0,this.subscore=0,this.color="red"}function fo(n){var t="0"+String(n%60);return("0"+String(Math.floor(n/60))).slice(-2)+":"+t.slice(-2)}function fp(n,t){return n.length>t.length?n:t}function fq(n){return clearInterval(n),null}fg.prototype.add=function(n,t,e,o,f,i){f=fe(f,"div"),i=fe(i,null);var a=new fg,c=document.createElement(f);return null!=i&&c.setAttribute("id",i),this.dom.appendChild(c),a.dom=c,a.width=this.width*e,a.height=this.height*o,a.dom.style.position="absolute",a.dom.style.left=this.width*n+"px",a.dom.style.top=this.height*t+"px",a.dom.style.width=a.width+"px",a.dom.style.height=a.height+"px","input"==f&&(a.pd("focus",function(){vb=!0}),a.pd("blur",function(){setTimeout(function(){vb=!1},500)})),a},fg.prototype.pa=function(n){this.dom.style.background=n},fg.prototype.pb=function(n,t,e){var o=null;(t=fe(t,!1))?(e=fe(e,100),o=ff(n,this.width,this.height,e)):"undefined"!==e&&(o=e);var f=document.createTextNode(n);null!=o&&(this.dom.style.fontSize=o+"px"),this.dom.appendChild(f)},fg.prototype.pc=function(n){this.dom.className+=" "+n},fg.prototype.pd=function(n,t){this.dom.addEventListener(n,t)},fh.prototype.pe=function(){fc("ClassView","render","This method is not implemented!")},fh.prototype.pf=function(n){this.app=n},fi.prototype.pg=function(n,t){var e=this.views;return e.hasOwnProperty(t)?(fc("ClassApp","addView","View with name "+t+" already exists!"),!1):(e[t]=n,e[t].pf(this),!0)},fi.prototype.ph=function(n){this.views.hasOwnProperty(n)?(this.currentView=n,this.pe()):fc("ClassApp","toggleView","View called "+n+" does not exist!")},fi.prototype.pe=function(){var n=this.canvas;n.dom.innerHTML="",n.width=window.innerWidth,n.height=window.innerHeight,n.dom.style.position="absolute",n.dom.style.width=n.width+"px",n.dom.style.height=n.height+"px",this.views[this.currentView].pe()},fi.prototype.pf=function(n){this.canvas.dom=fa(n);var t=this;window.addEventListener("resize",function(){vb||(fr(),t.pe())})};var vc={};function fr(){vc={}}function fs(n,t,e,o,f,i){var a=fe(i,100);return null==vc[f]&&(vc[f]=ff(o,n.width*t,n.height*e,a)),vc[f]}var app=new fi;function Main(){app.pf("Canvas"),app.context.players=[],app.context.initScore=0,app.context.numOfPlayers=4,app.context.colorSetup=[0,1,2,3,4,5],app.context.initCountdown=30,app.context.countdown=0,app.context.cntIntHndl=null;for(var n=0;n<app.context.numOfPlayers;n++)app.context.players.push(new fn),app.context.players[n].score=app.context.initScore,app.context.players[n].color=Colors[app.context.colorSetup[n]];var t=[{callback:ft,name:0},{callback:fx,name:1},{callback:fJ,name:2},{callback:fM,name:3},{callback:fj,name:4}];for(n=0;n<t.length;n++){var e=new fh;e.pe=t[n].callback,app.pg(e,t[n].name)}app.ph(0)}function ft(){var n=this.app.canvas,t=fI(n,!1);t.dom.className="",fu(t,this.app),fG(n,[new fE(vk.whoStarts,function(){app.ph(4)}),new fE(vk.timer,function(){app.ph(2)}),new fE(vk.settings,function(){app.ph(1)})],"d")}function fu(n,t){for(var e=t.context.players.length,o=2==e?1:2,f=Math.ceil(e/o),i=1/o,a=1/f,c=0,r=0;r<f;r++)for(var p=0;p<o;p++){e%2==1&&c+1==e&&(i=1);var s=n.add(p*i,r*a,i,a);if(s.pa(t.context.players[c].color),fv(c,s,t),e==++c)return}}function fv(n,t,e){var o=fs(t,.25,1,"XX","e",250);t.add(.25,0,.5,1,"div","f"+n).dom.style.fontSize=o+"px";var f=t.add(0,0,.25,1,"button");f.pb("−",!1,o),f.pd("click",function(){fw(e.context.players,n,-1)}),f.pc("score_btn");var i=t.add(.75,0,.25,1,"button");i.pb("+",!1,o),i.pd("click",function(){fw(e.context.players,n,1)}),i.pc("score_btn"),fw(e.context.players,n,e.context.players[n].score,!0)}function fw(n,t,e,o){o=fe(o,!1);n[t].score=(o?0:parseInt(n[t].score))+e,fa("f"+t).innerHTML=n[t].score}var vd=2,ve=6,Colors=["red","lightgreen","lightblue","yellow","pink","orange","grey","white"],vf=4,vg=[0,1,2,3,4,5],vh=0;function fx(){var n=this.app.canvas;fH(n,vk.settings),fy(fI(n),app),fG(n,[new fE(vk.apply,function(){fz(app),app.ph(0)}),new fE(vk.back,function(){fA(app),app.ph(0)})],"g")}function fy(n,t){for(var e=[vk.plCount,vk.initScore],o=fs(n,.6,.1,fp(e[0],e[1]),"h"),f=0;f<e.length;f++){var i=n.add(0,.1*f,.6,.1);i.pc("align_left"),i.pb(e[f],!1,o)}var a=n.add(0,1/9*2,1,1/9);a.dom.style.fontWeight="bold",a.pb(vk.plColors,!1,o),fB(n.add(.6,0,.4,.1,"select"),t),fC(n.add(.6,.1,.4,.1,"input","i"),t),fD(n.add(0,1/9*3,1,1/9*6),t)}function fz(n){var t=n.context,e=t.players;for(t.numOfPlayers=vf;t.numOfPlayers<e.length;)e.pop();for(;t.numOfPlayers>e.length;)e.push(new fn);for(var o=0;o<e.length;o++)t.colorSetup[o]=vg[o],e[o].color=Colors[vg[o]],e[o].score=parseInt(vh);t.initScore=parseInt(vh)}function fA(n){var t=n.context;vf=t.numOfPlayers;for(var e=0;e<ve;e++)vg[e]=t.colorSetup[e];vh=t.initScore}function fB(e,o){for(var f=vd;f<=ve;f++)!function(n){var t=e.add(0,0,1,1,"option");t.value=f,t.pb(f),t.pd("click",function(){vf=n,o.ph("settings")}),n==vf&&(t.dom.selected="selected")}(f)}function fC(n,t){n.dom.type="number",n.dom.value=vh,n.pd("input",function(){n.dom.validity.valid&&(vh=n.dom.value)}),n.dom.autocomplete="off"}function fD(f,n){for(var i=1/Colors.length,a=1/ve,t=0;t<vf;t++)for(var e=0;e<Colors.length;e++)!function(n,t){var e=f.add(t*i,n*a,i,a);e.pa(Colors[t]);var o="";vg[n]==t&&(o="checked"),e.dom.innerHTML='<input type="radio" name="j'+n+'" value="'+t+'" '+o+">",e.pd("click",function(){vg[n]=t})}(t,e)}var vi=.09,vj=.09;function fE(n,t,e){this.label=n,this.action=t,this.id=fe(e,null)}function fF(n,t,e,o,f,i,a){var c,r,p=f/t.length;if(null==vc[a]){for(var s="",l=0;l<t.length;l++)s=fp(s,t[l].label);vc[a]=ff(s,n.width*p,n.height*i)}for(l=0;l<t.length;l++)null!=t[l]&&(c=l,r=void 0,(r=n.add(e+l*p,o,p,i,"button",t[c].id)).pd("click",t[c].action),r.pb(t[c].label,!1,vc[a]),0<l&&r.pc("button_separator"))}function fG(n,t,e){var o=n.add(0,1-vj,1,vj);o.pc("toolbar"),fF(o,t,0,0,1,1,e)}function fH(n,t){var e=n.add(0,0,1,vi);null==vc.k&&(vc.k=ff(t,e.width,e.height)),e.pb(t,!1,vc.k),e.pc("header")}function fI(n,t){var e=fe(t,!0)?vi:0,o=n.add(0,e,1,1-e-vj);return o.pc("content"),o}var vk={whoStarts:"Kdo začne?",throwDice:"Hoď kostkami",tossCoin:"Hoď mincí",apply:"Použít",back:"Zpět",coin1:"Hlava",coin2:"Orel",settings:"Nastavení",timer:"Nezdržuj",initScore:"Počáteční skóre",plCount:"Počet hráčů",plColors:"Barvy hráčů",countdown:"Odpočet",set:"Nastav",play:"▷",pause:"❘ ❘",stop:"◻",restart:"⟲",end:"KONEC!!"};function fJ(){var n=this.app.canvas;fH(n,vk.countdown),fK(fI(n),this.app),fG(n,[new fE(vk.settings,function(){fL(app,5),app.ph(3)}),new fE(vk.back,function(){fL(app,5),app.ph(0)})],"l")}function fK(n,t){var e=t.context;e.countdown=e.initCountdown;var o=fs(n,1,.4,"XX:XX","m",250),f=n.add(0,0,1,.4,"div","n");f.dom.style.fontSize=o+"px",f.pb(fo(e.initCountdown)),fF(n,[new fE(vk.play,function(){fL(t,6)},"o"),new fE(vk.stop,function(){fL(t,5)}),new fE(vk.restart,function(){fL(t,7)})],0,.4,1,.1,"p")}function fL(n,t){var e=n.context,o=fa("n");if(6==t){if(null!=e.cntIntHndl)return e.cntIntHndl=fq(e.cntIntHndl),void(fa("o").innerHTML=vk.play);0==e.countdown&&fL(n,5),fa("o").innerHTML=vk.pause,e.cntIntHndl=setInterval(function(){e.countdown--,o.innerHTML=fo(e.countdown),0==e.countdown&&(e.cntIntHndl=fq(e.cntIntHndl),o.innerHTML=vk.end,fa("o").innerHTML=vk.play)},1e3)}else 5==t?(e.cntIntHndl=fq(e.cntIntHndl),e.countdown=e.initCountdown,o.innerHTML=fo(e.countdown),fa("o").innerHTML=vk.play):7==t?(fL(n,5),fL(n,6)):fc("Timer","CountdownControl","Invalid action name: "+t)}var vl=null;function fM(){var n=this.app.canvas;vl=this.app.context.initCountdown,fH(n,vk.settings),fN(fI(n),this.app),fG(n,[new fE(vk.apply,function(){app.context.initCountdown=vl,app.ph(2)}),new fE(vk.back,function(){app.ph(2)})],"q")}function fN(n,t){var e=fs(n,1,.4,"XX:XX","r",250),o=n.add(0,0,1,.4,"div","s");o.dom.style.fontSize=e+"px",o.pb("00:00"),fF(n,[new fE("-10",function(){fO(t,-10)}),new fE("-5",function(){fO(t,-5)}),new fE("-1",function(){fO(t,-1)}),new fE("+1",function(){fO(t,1)}),new fE("+5",function(){fO(t,5)}),new fE("+10",function(){fO(t,10)})],0,.4,1,.1,"t"),fO(t,0)}function fO(n,t){vl+=t,fa("s").innerHTML=fo(vl)}
"use strict";"static";var va=1;function fa(t){return document.getElementById(t)}function fb(t){return document.getElementsByName(t)}function fc(t,n,e){var o="ERROR: "+t+"::"+n+": "+e;console.error(o),0<va&&alert(o)}function fd(t,n){return Math.floor(Math.random()*n+t)}function fe(t,n){return void 0!==t?t:n}function ff(t,n,e,o){var i=fe(o,100),r=fa("HiddenResizer");r.style.fontSize=i+"px",r.innerHTML=t;for(var a=r.offsetWidth,d=r.offsetHeight;.8*n<a||.8*e<d;)i-=1,r.style.fontSize=i+"px",a=r.offsetWidth,d=r.offsetHeight;return i}function aElement(){this.dom=null,this.width=0,this.height=0}function View(){this.app=null}function App(){this.context={},this.canvas=new aElement,this.views={},this.currentView=""}function RenderDice(){var t=this.app.canvas,n=t.add(0,0,1,.1);n.pc(vj.whoStarts,!0),n.pb("#AAAAAA");var e=t.add(0,.1,1,.8,"div","a");e.pb("lightgrey");var o=ff("#######",e.width,e.height,1e3);e.dom.style.fontSize=o+"px",e.pc("??");var i=t.add(0,.9,1,.1);i.pb("grey"),i.dom.style.border="1px solid black",fg(i,this.app)}function fg(t,n){var e=t.add(0,0,1/3,1,"button"),o=ff(vj.throwDice,e.width,e.height);e.dom.pa("click",function(){fh(n)}),e.dom.style.fontSize=o+"px",e.pc(vj.throwDice);var i=t.add(1/3,0,1/3,1,"button");i.dom.pa("click",function(){fi(n)}),i.dom.style.fontSize=o+"px",i.pc(vj.tossCoin);var r=t.add(2/3,0,1/3,1,"button");r.dom.pa("click",function(){n.toggleView("score")}),r.dom.style.fontSize=o+"px",r.pc(vj.back)}function fh(t){var n=["⚀","⚁","⚂","⚃","⚄","⚅"],e=fd(1,6)-1,o=fd(1,6)-1,i=fd(1,6)-1;fa("a").innerHTML=n[e]+" "+n[o]+" "+n[i]}function fi(t){var n=[vj.coin1,vj.coin2];fa("a").innerHTML=n[fd(1,2)-1]}function fj(t){var n="0"+String(t%60);return("0"+String(Math.floor(t/60))).slice(-2)+":"+n.slice(-2)}Element.prototype.pa=function(t,n){this.addEventListener(t,n)},aElement.prototype.add=function(t,n,e,o,i,r){i=fe(i,"div"),r=fe(r,null);var a=new aElement,d=document.createElement(i);return null!=r&&d.setAttribute("id",r),this.dom.appendChild(d),a.dom=d,a.width=this.width*e,a.height=this.height*o,a.dom.style.position="absolute",a.dom.style.left=this.width*t+"px",a.dom.style.top=this.height*n+"px",a.dom.style.width=a.width+"px",a.dom.style.height=a.height+"px",a},aElement.prototype.pb=function(t){this.dom.style.background=t},aElement.prototype.pc=function(t,n,e){var o=null;(n=fe(n,!1))?(e=fe(e,100),o=ff(t,this.width,this.height,e)):"undefined"!==e&&(o=e);var i=document.createTextNode(t);null!=o&&(this.dom.style.fontSize=o+"px"),this.dom.appendChild(i)},View.prototype.render=function(){fc("View","render","This method is not implemented!")},View.prototype.bootstrap=function(t){this.app=t},App.prototype.addView=function(t,n){var e=this.views;return e.hasOwnProperty(n)?(fc("App","addView","View with name "+n+" already exists!"),!1):(e[n]=t,e[n].bootstrap(this),!0)},App.prototype.toggleView=function(t){this.views.hasOwnProperty(t)?(this.currentView=t,this.render()):fc("App","toggleView","View called "+t+" does not exist!")},App.prototype.render=function(){var t=this.canvas;t.dom.innerHTML="",t.width=window.innerWidth,t.height=window.innerHeight,t.dom.style.position="absolute",t.dom.style.width=t.width+"px",t.dom.style.height=t.height+"px",this.views[this.currentView].render()},App.prototype.bootstrap=function(t){this.canvas.dom=fa(t);var n=this;window.addEventListener("resize",function(){n.render()})};var vb="#AAAAAA",vc="lightgrey",vd="grey",ve=null;function RenderScore(){var t=this.app.canvas;fk(t.add(0,0,1,.9),this.app);var n=t.add(0,.9,1,.1);n.dom.style.border="1px solid black",n.pb("grey"),fn(n,this.app)}function fk(t,n){for(var e=n.context.players.length,o=2==e?1:2,i=Math.ceil(e/o),r=1/o,a=1/i,d=0,c=0;c<i;c++)for(var f=0;f<o;f++){e%2==1&&d+1==e&&(r=1);var p=t.add(f*r,c*a,r,a);if(p.pb(n.context.players[d].color),fl(d,p,n),e==++d)return}}function fl(t,n,e){null==ve&&(ve=ff("XX",.25*n.width,n.height)),n.add(.25,0,.5,1,"div","b"+t).dom.style.fontSize=ve+"px";var o=n.add(0,0,.25,1,"button");o.pc("−",!1,ve),o.dom.pa("click",function(){fm(e.context.players,t,-1)}),o.dom.className="score_btn";var i=n.add(.75,0,.25,1,"button");i.pc("+",!1,ve),i.dom.pa("click",function(){fm(e.context.players,t,1)}),i.dom.className="score_btn",fm(e.context.players,t,e.context.players[t].score,!0)}function fm(t,n,e,o){o=fe(o,!1);t[n].score=(o?0:parseInt(t[n].score))+e,fa("b"+n).innerHTML=t[n].score}function fn(t,n){var e=t.add(0,0,1/3,1,"button","c"),o=ff(vj.settings,e.width,e.height);e.dom.style.fontSize=o+"px",e.pc(vj.whoStarts),e.dom.pa("click",function(){n.toggleView("dice")});var i=t.add(1/3,0,1/3,1,"button");i.dom.style.fontSize=o+"px",i.pc(vj.timer),i.dom.pa("click",function(){n.toggleView("timer")});var r=t.add(2/3,0,1/3,1,"button","d");r.dom.style.fontSize=o+"px",r.pc(vj.settings),r.dom.pa("click",function(){n.toggleView("settings")})}var vf=2,vg=6,Colors=["red","lightgreen","lightblue","yellow","pink","orange","grey","white"],vh="init_score_btn init_score_btn_left",vi="init_score_btn init_score_btn_right";function RenderSettings(){var t=this.app.canvas,n=t.add(0,0,1,.9);n.pb("lightgrey"),fo(n,this.app);var e=t.add(0,.9,1,.1);e.pb("grey"),ft(e,this.app)}function fo(t,n){var e=1/11;t.dom.style.fontSize=ff(vj.initScore,t.width,t.height*e)+"px";var o=t.add(0,0,1,e);o.pc(vj.plCount,!1),o.pb("#AAAAAA"),fp(t.add(0,1*e,1,e),n);var i=t.add(0,2*e,1,e);i.pc(vj.initScore,!1),i.pb("#AAAAAA"),fq(t.add(0,3*e,1,e),n);var r=t.add(0,4*e,1,e);r.pc(vj.plColors,!1),r.pb("#AAAAAA"),fs(t.add(0,5*e,1,6*e),n)}function fp(t,n){for(var e=1/(vg-vf+1),o=vf;o<=vg;o++){var i=t.add((o-vf)*e,0,e,1),r="";o==n.context.numOfPlayers&&(r="checked"),i.dom.innerHTML='<input type="radio" name="e" value="'+o+'" '+r+">"+o+"</radio>"}}function fq(e,o){for(var i=[0,.2,.6,.8],r=[-5,-1,1,5],a=["darkred","red","lightgreen","green"],d=[vh,vi,vh,vi],t=0;t<a.length;t++)!function(t){var n=e.add(i[t],0,.2,1,"button");n.dom.pa("click",function(){fr(r[t],o)}),n.dom.className=d[t],n.pb(a[t]),n.pc(r[t],!0)}(t);e.add(.4,0,.2,1,"div","f").pc(o.context.initScore,!0)}function fr(t,n){var e=fa("f");n.context.initScore=parseInt(e.innerHTML)+t,e.innerHTML=n.context.initScore}function fs(t,n){for(var e=1/vg,o=1/Colors.length,i=0;i<vg;i++)for(var r=0;r<Colors.length;r++){var a=t.add(r*o,i*e,o,e);a.pb(Colors[r]);var d="";n.context.colorSetup[i]==r&&(d="checked"),a.dom.innerHTML='<input type="radio" name="g'+i+'" value="'+r+'" '+d+">"}}function ft(t,n){var e=t.add(0,0,.5,1,"button");e.dom.pa("click",function(){fu(n),n.toggleView("score")}),e.pc(vj.apply,!0);var o=t.add(.5,0,.5,1,"button");o.dom.pa("click",function(){n.toggleView("score")}),o.pc(vj.back,!0)}function fu(t){for(var n=t.context,e=n.players,o=fb("e"),i=0;i<o.length;i++)if(o[i].checked){n.numOfPlayers=o[i].value;break}for(;n.numOfPlayers<e.length;)e.pop();for(;n.numOfPlayers>e.length;)e.push(new Player);for(var r=0;r<e.length;r++){var a=fb("g"+r);for(i=0;i<a.length;i++)if(a[i].checked){n.colorSetup[r]=i;break}e[r].color=Colors[n.colorSetup[r]],e[r].score=n.initScore}}var vj={whoStarts:"Kdo začne?",throwDice:"Hoď kostkami",tossCoin:"Hoď mincí",apply:"Použít",back:"Zpět",coin1:"Hlava",coin2:"Orel",settings:"Nastavení",timer:"Nezdržuj",initScore:"Počáteční skóre",plCount:"Počet hráčů",plColors:"Barvy hráčů",countdown:"Odpočet",set:"Nastav",run:"Spusť",pause:"Pauza",stop:"Stop",restart:"Restart",end:"KONEC!!"};function RenderTimer(){var t=this.app.canvas,n=t.add(0,0,1,.1);n.pc(vj.countdown,!0),n.pb(vb);var e=t.add(0,.1,1,.8);e.pb(vc),fv(e,this.app);var o=t.add(0,.9,1,.1);o.pb(vd),fw(o,this.app)}function fv(e,o){var t=o.context;t.countdown=t.initCountdown,e.add(0,0,1,.3,"div","h").pc(fj(t.initCountdown),!0);for(var i=[vj.run,vj.pause,vj.stop,vj.restart],r=["play","pause","stop","restart"],a=i.length,d=0;d<a;d++)!function(t){var n=e.add(d*(1/a),.4,1/a,.2,"button");n.dom.pa("click",function(){fx(o,r[t])}),n.pc(i[d],!0)}(d)}function fw(e,o){for(var i=[vj.settings,vj.back],r=["timer_settings","score"],a=0;a<i.length;a++)!function(t){var n=e.add(.5*a,0,.5,1,"button");n.dom.pa("click",function(){fx(o,"stop"),o.toggleView(r[t])}),n.pc(i[a],!0)}(a)}function fx(t,n){var e=t.context;"play"==n?e.cntIntHndl=setInterval(function(){var t=fa("h");e.countdown--,t.innerHTML=fj(e.countdown),0==e.countdown&&(clearInterval(e.cntIntHndl),t.innerHTML=vj.end)},1e3):"pause"==n?clearInterval(e.cntIntHndl):"stop"==n?(clearInterval(e.cntIntHndl),e.countdown=e.initCountdown,fa("h").innerHTML=fj(e.countdown)):"restart"==n?(fx(t,"stop"),fx(t,"play")):fc("Timer","fx","Invalid action name: "+n)}var vk=null;function RenderTimerSettings(){var t=this.app.canvas;vk=this.app.context.initCountdown;var n=t.add(0,0,1,.9);n.pb("lightgrey"),fy(n,this.app);var e=t.add(0,.9,1,.1);e.pb("grey"),fz(e,this.app)}function fy(e,o){var t=e.add(0,0,1,.1);t.pc(vj.settings,!0),t.pb("#AAAAAA");for(var i=[-10,-5,-1,null,1,5,10],r=[0,0,0,null,7,7,7],a=[0,1,2,null,0,1,2],n=0;n<i.length;n++)null!=i[n]&&function(t){var n=e.add(1*a[t]/3,.1+.1*r[t],1/3,.2,"button");n.pc(i[t],!0),n.dom.pa("click",function(){fza(o,i[t])})}(n);e.add(0,3*.1,1,.5,"div","i").pc("00:00",!0),fza(o,0)}function fz(t,n){for(var e,o,i=[vj.apply,vj.back],r=[function(){n.context.initCountdown=vk,n.toggleView("timer")},function(){n.toggleView("timer")}],a=0;a<i.length;a++)e=a,o=void 0,(o=t.add(.5*e,0,.5,1,"button")).pc(i[e],!0),o.dom.pa("click",r[e])}function fza(t,n){vk+=n,fa("i").innerHTML=fj(vk)}
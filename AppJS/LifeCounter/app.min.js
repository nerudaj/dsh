"use strict";var version="2.0.0",va=1,vb=!1;function fa(n){return document.getElementById(n)}function fb(n){return document.getElementsByName(n)}function fc(n,t,o){var e="ERROR: "+n+"::"+t+": "+o;console.error(e),0<va&&alert(e)}function fd(n,t){return Math.floor(Math.random()*t+n)}function fe(n,t){return void 0!==n?n:t}function ff(n,t,o,e){var f=fe(e,100),i=fa("HiddenResizer");i.style.fontSize=f+"px",i.innerHTML=n;for(var a=i.offsetWidth,r=i.offsetHeight;.8*t<a||.8*o<r;)f-=1,i.style.fontSize=f+"px",a=i.offsetWidth,r=i.offsetHeight;return f}function fg(){this.dom=null,this.width=0,this.height=0}function fh(){this.app=null}function fi(){this.context={},this.canvas=new fg,this.views={},this.currentView=""}fg.prototype.add=function(n,t,o,e,f,i){f=fe(f,"div"),i=fe(i,null);var a=new fg,r=document.createElement(f);return null!=i&&r.setAttribute("id",i),this.dom.appendChild(r),a.dom=r,a.width=this.width*o,a.height=this.height*e,a.dom.style.position="absolute",a.dom.style.left=this.width*n+"px",a.dom.style.top=this.height*t+"px",a.dom.style.width=a.width+"px",a.dom.style.height=a.height+"px","input"==f&&(a.pd("focus",function(){vb=!0}),a.pd("blur",function(){setTimeout(function(){vb=!1},500)})),a},fg.prototype.pa=function(n){this.dom.style.background=n},fg.prototype.pb=function(n,t,o){var e=null;(t=fe(t,!1))?(o=fe(o,100),e=ff(n,this.width,this.height,o)):"undefined"!==o&&(e=o);var f=document.createTextNode(n);null!=e&&(this.dom.style.fontSize=e+"px"),this.dom.appendChild(f)},fg.prototype.pc=function(n){this.dom.className+=" "+n},fg.prototype.pd=function(n,t){this.dom.addEventListener(n,t)},fh.prototype.pe=function(){fc("ClassView","render","This method is not implemented!")},fh.prototype.pf=function(n){this.app=n},fi.prototype.pg=function(n,t){var o=this.views;return o.hasOwnProperty(t)?(fc("ClassApp","addView","View with name "+t+" already exists!"),!1):(o[t]=n,o[t].pf(this),!0)},fi.prototype.ph=function(n){this.views.hasOwnProperty(n)?(this.currentView=n,this.pe()):fc("ClassApp","toggleView","View called "+n+" does not exist!")},fi.prototype.pe=function(){var n=this.canvas;n.dom.innerHTML="",n.width=window.innerWidth,n.height=window.innerHeight,n.dom.style.position="absolute",n.dom.style.width=n.width+"px",n.dom.style.height=n.height+"px",this.views[this.currentView].pe()},fi.prototype.pf=function(n){this.canvas.dom=fa(n);var t=this;window.addEventListener("resize",function(){vb||(fs(),t.pe())})};var vc=fm;function fj(){var n=this.app.canvas;fI(n,vl.whoStarts),fk(fJ(n)),fH(n,[new fF(vl.throwDice,function(){vc=fm,fl()}),new fF(vl.tossCoin,function(){vc=fn,fl()}),new fF(vl.back,function(){app.ph(0)})],"a")}function fk(n){n.pd("click",function(){fl()});var t=n.add(0,0,1,1,"div","b"),o=ft(t,1,1,"⚀⚀⚀","c",Math.min(n.width,n.height));t.pb("??",!1,o)}function fl(){fa("b").innerHTML="...",setTimeout(function(){vc()},500)}function fm(){var n=["⚀","⚁","⚂","⚃","⚄","⚅"],t=fa("b");t.innerHTML="";for(var o=0;o<3;o++)t.innerHTML+=n[fd(1,6)-1]}function fn(){var n=[vl.coin1,vl.coin2];fa("b").innerHTML=n[fd(1,2)-1]}function fo(){this.score=0,this.subscore=0,this.color="red"}function fp(n){var t="0"+String(n%60);return("0"+String(Math.floor(n/60))).slice(-2)+":"+t.slice(-2)}function fq(n,t){return n.length>t.length?n:t}function fr(n){return clearInterval(n),null}var vd={};function fs(){vd={}}function ft(n,t,o,e,f,i){var a=fe(i,100);return null==vd[f]&&(vd[f]=ff(e,n.width*t,n.height*o,a)),vd[f]}var app=new fi;function Main(){app.pf("Canvas"),app.context.players=[],app.context.initScore=0,app.context.numOfPlayers=4,app.context.colorSetup=[0,1,2,3,4,5],app.context.initCountdown=30,app.context.countdown=0,app.context.cntIntHndl=null;for(var n=0;n<app.context.numOfPlayers;n++)app.context.players.push(new fo),app.context.players[n].score=app.context.initScore,app.context.players[n].color=Colors[app.context.colorSetup[n]];var t=[{callback:fu,name:0},{callback:fy,name:1},{callback:fK,name:2},{callback:fN,name:3},{callback:fj,name:4}];for(n=0;n<t.length;n++){var o=new fh;o.pe=t[n].callback,app.pg(o,t[n].name)}app.ph(0)}function fu(){var n=this.app.canvas,t=fJ(n,!1);t.dom.className="",fv(t,this.app),fH(n,[new fF(vl.whoStarts,function(){app.ph(4)}),new fF(vl.timer,function(){app.ph(2)}),new fF(vl.settings,function(){app.ph(1)})],"d")}function fv(n,t){for(var o=t.context.players.length,e=2==o?1:2,f=Math.ceil(o/e),i=1/e,a=1/f,r=0,p=0;p<f;p++)for(var c=0;c<e;c++){o%2==1&&r+1==o&&(i=1);var l=n.add(c*i,p*a,i,a);if(l.pa(t.context.players[r].color),fw(r,l,t),o==++r)return}}function fw(n,t,o){var e=ft(t,.25,1,"XX","e",250);t.add(.25,0,.5,1,"div","f"+n).dom.style.fontSize=e+"px";var f=t.add(0,0,.25,1,"button");f.pb("−",!1,e),f.pd("click",function(){fx(o.context.players,n,-1)}),f.pc("score_btn");var i=t.add(.75,0,.25,1,"button");i.pb("+",!1,e),i.pd("click",function(){fx(o.context.players,n,1)}),i.pc("score_btn"),fx(o.context.players,n,o.context.players[n].score,!0)}function fx(n,t,o,e){e=fe(e,!1);n[t].score=(e?0:parseInt(n[t].score))+o,fa("f"+t).innerHTML=n[t].score}var ve=2,vf=6,Colors=["#c40000","lightgreen","lightblue","yellow","#ff3399","orange","grey","#f5f5f5"],vg=4,vh=[0,1,2,3,4,5],vi=0;function fy(){var n=this.app.canvas;fI(n,vl.settings),fz(fJ(n),app),fH(n,[new fF(vl.apply,function(){fA(app),app.ph(0)}),new fF(vl.back,function(){fB(app),app.ph(0)})],"g")}function fz(n,t){for(var o=[vl.plCount,vl.initScore],e=ft(n,.6,.1,fq(o[0],o[1]),"h"),f=0;f<o.length;f++){var i=n.add(0,.1*f,.6,.1);i.pc("align_left"),i.pb(o[f],!1,e)}var a=n.add(0,1/9*2,1,1/9);a.dom.style.fontWeight="bold",a.pb(vl.plColors,!1,e),fC(n.add(.6,0,.4,.1,"select"),t),fD(n.add(.6,.1,.4,.1,"input","i"),t),fE(n.add(0,1/9*3,1,1/9*6),t)}function fA(n){var t=n.context,o=t.players;for(t.numOfPlayers=vg;t.numOfPlayers<o.length;)o.pop();for(;t.numOfPlayers>o.length;)o.push(new fo);for(var e=0;e<o.length;e++)t.colorSetup[e]=vh[e],o[e].color=Colors[vh[e]],o[e].score=parseInt(vi);t.initScore=parseInt(vi)}function fB(n){var t=n.context;vg=t.numOfPlayers;for(var o=0;o<vf;o++)vh[o]=t.colorSetup[o];vi=t.initScore}function fC(o,e){for(var f=ve;f<=vf;f++)!function(n){var t=o.add(0,0,1,1,"option");t.value=f,t.pb(f),t.pd("click",function(){vg=n,e.ph(1)}),n==vg&&(t.dom.selected="selected")}(f)}function fD(n,t){n.dom.type="number",n.dom.value=vi,n.pd("input",function(){n.dom.validity.valid&&(vi=n.dom.value)}),n.dom.autocomplete="off"}function fE(f,n){for(var i=1/Colors.length,a=1/vf,t=0;t<vg;t++)for(var o=0;o<Colors.length;o++)!function(n,t){var o=f.add(t*i,n*a,i,a);o.pa(Colors[t]);var e="";vh[n]==t&&(e="checked"),o.dom.innerHTML='<input type="radio" name="j'+n+'" value="'+t+'" '+e+">",o.pd("click",function(){vh[n]=t})}(t,o)}var vj=.0807,vk=vj;function fF(n,t,o){this.label=n,this.action=t,this.id=fe(o,null)}function fG(n,t,o,e,f,i,a){var r,p,c=f/t.length;if(null==vd[a]){for(var l="",d=0;d<t.length;d++)l=fq(l,t[d].label);vd[a]=ff(l,n.width*c,n.height*i)}for(d=0;d<t.length;d++)null!=t[d]&&(r=d,p=void 0,(p=n.add(o+d*c,e,c,i,"button",t[r].id)).pd("click",t[r].action),p.pb(t[r].label,!1,vd[a]),0<d&&p.pc("button_separator"))}function fH(n,t,o){var e=n.add(0,1-vk,1,vk);e.pc("toolbar"),fG(e,t,0,0,1,1,o)}function fI(n,t){var o=n.add(0,0,1,vj);null==vd.k&&(vd.k=ff(t,o.width,o.height)),o.pb(t,!1,vd.k),o.pc("header")}function fJ(n,t){var o=fe(t,!0)?vj:0,e=n.add(0,o,1,1-o-vk);return e.pc("content"),e}var vl={whoStarts:"Kdo začne?",throwDice:"Hoď kostkami",tossCoin:"Hoď mincí",apply:"Použít",back:"Zpět",coin1:"Hlava",coin2:"Orel",settings:"Nastavení",timer:"Nezdržuj",initScore:"Počáteční skóre",plCount:"Počet hráčů",plColors:"Barvy hráčů",countdown:"Odpočet",play:"▷",pause:"❘ ❘",stop:"◻",restart:"⟲",end:"KONEC"};function fK(){var n=this.app.canvas;fI(n,vl.countdown),fL(fJ(n),this.app),fH(n,[new fF(vl.settings,function(){fM(app,5),app.ph(3)}),new fF(vl.back,function(){fM(app,5),app.ph(0)})],"l")}function fL(n,t){var o=t.context;o.countdown=o.initCountdown;var e=ft(n,1,.4,"XX:XX","m",250),f=n.add(0,0,1,.4,"div","n");f.dom.style.fontSize=e+"px",f.pb(fp(o.initCountdown)),fG(n,[new fF(vl.play,function(){fM(t,6)},"o"),new fF(vl.stop,function(){fM(t,5)}),new fF(vl.restart,function(){fM(t,7)})],0,.4,1,.1,"p")}function fM(n,t){var o=n.context,e=fa("n");if(6==t){if(null!=o.cntIntHndl)return o.cntIntHndl=fr(o.cntIntHndl),void(fa("o").innerHTML=vl.play);0==o.countdown&&fM(n,5),fa("o").innerHTML=vl.pause,o.cntIntHndl=setInterval(function(){o.countdown--,e.innerHTML=fp(o.countdown),0==o.countdown&&(o.cntIntHndl=fr(o.cntIntHndl),e.innerHTML=vl.end,fa("o").innerHTML=vl.play)},1e3)}else 5==t?(o.cntIntHndl=fr(o.cntIntHndl),o.countdown=o.initCountdown,e.innerHTML=fp(o.countdown),fa("o").innerHTML=vl.play):7==t?(fM(n,5),fM(n,6)):fc("Timer","CountdownControl","Invalid action name: "+t)}var vm=null;function fN(){var n=this.app.canvas;vm=this.app.context.initCountdown,fI(n,vl.settings),fO(fJ(n),this.app),fH(n,[new fF(vl.apply,function(){app.context.initCountdown=vm,app.ph(2)}),new fF(vl.back,function(){app.ph(2)})],"q")}function fO(n,t){var o=ft(n,1,.4,"XX:XX","r",250),e=n.add(0,0,1,.4,"div","s");e.dom.style.fontSize=o+"px",e.pb("00:00"),fG(n,[new fF("-10",function(){fP(t,-10)}),new fF("-5",function(){fP(t,-5)}),new fF("-1",function(){fP(t,-1)}),new fF("+1",function(){fP(t,1)}),new fF("+5",function(){fP(t,5)}),new fF("+10",function(){fP(t,10)})],0,.4,1,.1,"t"),fP(t,0)}function fP(n,t){vm+t<=0?vm=1:vm+=t,fa("s").innerHTML=fp(vm)}